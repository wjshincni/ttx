<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Survey</title>
</head>
<style>
    html,body{
        height: 100%;
        background-color: darkcyan;
    }
    *{
        padding: 0;
        margin: 0;
    }
    legend{
        font-family: "仿宋","宋体","微软雅黑";
        font-size: 50px;
        color: chartreuse;
    }
    fieldset{
        border-radius: 100px;
        border: 10px dashed lightcoral;
    }
    div{
        margin: 20px;
        background-color: azure;
        text-align: center;
    }
    h2{
        text-decoration: none;
        color: rgb(37, 17, 150);
        font-family: "宋体","华文姚体","微软雅黑";
    }
    .txt{
        color: aliceblue;
        font-family: "楷体","幼圆","微软雅黑";
        text-align: center;
        line-height: auto;
        text-decoration: none;
    }
    .box::after{
        content: none;
        clear: both;
        display: block;
        width: 0;
        height: 0;
        visibility: hidden;
    }
    .container{
        padding: none;
        overflow: auto;
    }
    .wrap {
        display: flex;
        justify-content: center;
        align-items:self-start;
    }
    .bar-group {
        text-align: center;
    }
    .bar-group input:first-of-type {
        width: 300px;
    }
    .bar-group input:not(:first-of-type) {
        padding: 5px 20px;
    }
    .flw{
        float: left bottom;
        background-attachment: fixed;
        background-color: lightsalmon;
        font-family: "华文行楷","微软雅黑";
        font-size: 20px;
        color: rgb(42, 79, 146);
    }
</style>
<body>
    <div class="flw">
        <span>元旦快乐!本活动由赵老师主管</span>
    </div>
    <h1 class="txt">在这个学期的最后,有一名老师理应得到一件意义非凡的礼物</h1>
    <h3 class="txt">零花钱是此次筹集班费的主要目标,而不是张口问父母要的钱,否则这次活动没有任何意义</h3>
    <fieldset>
        <legend>班费筹集</legend>
    <div>
        <h2>你愿不愿意为班级筹集一份班费?</h2>
        <input type="radio" name="yesorno" id="sv">是
        <input type="radio" name="yesorno">否<strong>(可直接提交,务必填写)</strong>
    </div>
    <div>
        <h2>选择你的名字:</h2>
        <select>
                <option>请选择</option>
                <option>唐斯雨</option>
                <option>黄筱娇</option>
                <option>沈欣怡</option>
                <option>施依连</option>
                <option>蒋思琪</option>
                <option>朱筱雅</option>
                <option>陈欢</option>
                <option>唐天笑</option>
                <option>范俊豪</option>
                <option>徐福曼</option>
                <option>储静雯</option>
                <option>李敏捷</option>
                <option>杨叶</option>
                <option>陈静雯</option>
                <option>樊佳媛</option>
                <option>徐志豪</option>
                <option>陶宇琪</option>
                <option>徐金盼</option>
                <option>戴俊豪</option>
                <option>潘莹莹</option>
                <option>唐浩楠</option>
                <option>房恋</option>
                <option>徐成乐</option>
        </select>
    </div>
    <div>
        <h2>你认为最有可能赠于这一份特殊之礼的老师:</h2>
        <select>
            <option>请选择</option>
            <option>语文老师</option>
            <option>数学老师</option>
            <option>英语老师</option>
            <option>物理老师</option>
            <option>化学老师</option>
            <option>地理老师</option>
            <option>美术老师</option>
            <option>生命老师</option>
            <option>体育老师</option>
            <option>音乐老师</option>
            <option>其他</option>
        </select>
    </div>
    <div>
        <h2>你推荐的礼品有:(可多填)</h2>
        <input type="text" placeholder="如果多填请用逗号隔开." style="width: 50%;">
    </div>
    <div>
        <h2>你确定使用自己的零花钱为班费贡献吗?</h2>
        <input type="radio" name="pocketmoney">是
        <input type="radio" name="pocketmoney">不是<strong>(请直接提交)</strong>
    </div>
    <div>
        <h2>你建议的班费金额<em>(单位￥/人,必填)</em>和你的宝贵意见<em>(选填)</em>:</h2>
        <div class="wrap">
            <div class="container">
                <ul class="msg"></ul>
            </div>
        </div>
        <form onsubmit="return false">
            <div class="bar-group">
                <input type="text" id="umsg" placeholder="[例]20元,......"/>
            </div>
        </form>
    </div>
    <div>
        <h2>请确认:</h2>
        <input type="checkbox">我确认<u>信息无误</u>
        <input type="checkbox">我确认<u>没有乱填</u>
        <input type="checkbox" checked>我确认<u>使用零花钱</u>
        <input type="checkbox" checked><u>我确认是九一班的学生</u>
    </div>
    <div>
        <button onclick="send();alert('感谢参与!');replace()"><strong>提交</strong></button>
    </div>
    </fieldset>
</body>
<script>
    var container = document.querySelector('.container');
    var msg = document.querySelector('.msg');
    var umsg = document.querySelector('#umsg');
    var sv = document.querySelector('sv');
    function send() {
        if (umsg.value) {
            var uli = document.createElement('li');
                uli.textContent = '您希望的捐款数额或其他意见是' + umsg.value;
                msg.appendChild(uli);
            var  params = new URLSearchParams({
                key: '868ffe977d3b445b541e7e28acb51e41',
                question: umsg.value,
            });
    
            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://api.tianapi.com/txapi/robot/index', true);
            xhr.responseType = 'json';
            xhr.onload = function() {
                if (xhr.readyState === 4) {
                    if ( (xhr.status >= 200 && xhr.status < 300)
                    || (xhr.status === 304) ) {
                        var retval = this.response.newslist[0].reply
                            .replace(/\{appellation\}/g, 'sname')
                            .replace(/\{robotname\}/g, 'uname');
                        
                        var hli = document.createElement('li');
                            hli.textContent = '感谢你的参与!已收录您的观点.';
                        msg.appendChild(hli);
                        container.scrollTop = container.scrollHeight;
                    }
                }
            };
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send(params);
        }
        umsg.focus();
        container.scrollTop = container.scrollHeight; 
    }
    function clearTxt() {
        msg.innerHTML = null;
        umsg.value = null;
        umsg.focus();
    }
    function replace(){
        umsg.setAttribute("disabled", true);
        umsg.value = "您已参与活动,无法再次填写"
        document.getElementById("sv").disabled = true;
    }
    umsg.focus();
    </script>
</html>